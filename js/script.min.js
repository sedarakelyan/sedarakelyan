// var root_url = 'http://herokuapp.loc';
$(".loader").show();

var root_url = 'https://glacial-cliffs-18575.herokuapp.com';

var vueapp = new Vue({
    el: '#app',
    data: {
        url : root_url,
        skills: [],
        portfolios: [],
        portfoliobyid:'',
        cv:''

    }, mounted(){ 
         
        this.get_skills();
        this.get_portfolios();
        this.get_last_cv()
    }, methods:{
         get_skills (){
            axios.get(`${root_url}/api/seda/skills`).then(function (response) {
                if (response.data) {
                    vueapp.skills = response.data;
                }
            }).catch(function (error) { 
                console.log(error);
            }); 
        },
         get_portfolios(){
            axios.get(`${root_url}/api/seda/portfolios`).then(function (response) {
                if (response.data) {
                    vueapp.portfolios = response.data
                }
            }).catch(function (error) { 
                console.log(error);
            });
        }, 
        get_last_cv(){
            axios.get(`${root_url}/api/seda/cv`).then(function (response) {
                if (response.data) {
                    vueapp.cv = response.data;
                }
            }).catch(function (error) { 
                console.log(error);
            });
        },
        get_portfolio_by_id(id){ 
            axios.get(`${root_url}/api/seda/portfolio/${id}`).then(function (response) {
                if (response.data) {  
                    vueapp.portfoliobyid = response.data;
                    $('.loader').show();
                    $('#portfolioModal').modal();
                    $('.carousel-item').removeClass('active');
                    setTimeout(() => {
                        $('.carousel-item:first').addClass('active');
                    }, 300);
                    setTimeout(() => {
                        $('.loader').fadeOut();
                    }, 400);
                   
                } 
            }).catch(function (error) { 
                console.log(error);
            });
        }
        
    }
})
  
$(document).ready(function () { 
    setTimeout(() => {
        $(".loader").fadeOut(800);
        $("#app").fadeIn(800);
    }, 800);

    $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
        if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) {
            var e = $(this.hash);
            if (e = e.length ? e : $("[name=" + this.hash.slice(1) + "]"), e.length){
                return $("html, body").animate({scrollTop: e.offset().top - 54}, "easeInOutExpo");
            }
        }
    });

    $(".js-scroll-trigger").click(function () {
        $(".navbar-collapse").collapse("hide")
    });

    $("body").scrollspy({
        target: "#mainNav",
        offset: 56
    });

    $(window).scroll(function (e) {
        scroll_menu();
    })
    $(".portfolio-modal").on("hidden.bs.modal", function (e) {
        $(".navbar").removeClass("d-none")
    });

    function scroll_menu() {
        $("#mainNav").offset().top > 80 ? $("#mainNav").addClass("navbar-shrink") : $("#mainNav").removeClass("navbar-shrink")
    }

    scroll_menu();

    new Typed("#typetext", {
        strings: ["Welcome to my CV page", "I am Seda", "I am a <strong>Journalist</strong>"],
        typeSpeed: 70,
        backSpeed: 300,
        cursorChar: "_",
        fadeOut: !0,
        loop: !0
    });


 
})

