var root_url = 'http://herokuapp.loc';
// var root_url = 'https://glacial-cliffs-18575.herokuapp.com';

$(document).ready(function () {
    $(".loader").fadeOut(700, function() {
        $("#app").fadeIn(500); 
        $(".loader").remove();
    });
    $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
        if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) {
            var e = $(this.hash);
            if (e = e.length ? e : $("[name=" + this.hash.slice(1) + "]"), e.length){
                return $("html, body").animate({scrollTop: e.offset().top - 54}, "easeInOutExpo");
            }
        }
    });
    $(".js-scroll-trigger").click(function () {
        $(".navbar-collapse").collapse("hide")
    });
    $("body").scrollspy({
        target: "#mainNav",
        offset: 56
    });

    $(window).scroll(function (e) {
        scroll_menu();
    })
    $(".portfolio-modal").on("hidden.bs.modal", function (e) {
        $(".navbar").removeClass("d-none")
    });

    function scroll_menu() {
        $("#mainNav").offset().top > 80 ? $("#mainNav").addClass("navbar-shrink") : $("#mainNav").removeClass("navbar-shrink")
    }
    scroll_menu();
    new Typed("#typetext", {
        strings: ["Welcome to my CV page", "I am Seda", "I am a <strong>Journalist</strong>"],
        typeSpeed: 70,
        backSpeed: 300,
        cursorChar: "_",
        fadeOut: !0,
        loop: !0
    });

    $(document).on('click','.portfolio-link',function(){
        var p_id = $(this).attr('data-portfolioid');
        get_portfolio_by_id(p_id);
    });

    get_skills();
    get_portfolios();
})

function get_skills (){
    axios.get(`${root_url}/api/seda/skills`).then(function (response) {
        if (response.data) {
            new Vue({
                el: '#skills',
                data: {
                    url : root_url,
                    skills: response.data
                }
            })
        }
    }).catch(function (error) { 
        console.log(error);
    });
}

function get_portfolios(){
    axios.get(`${root_url}/api/seda/portfolios`).then(function (response) {
        if (response.data) {
            console.log(response.data);

            new Vue({
                el: '#portfolio',
                data: {
                    url : root_url,
                    portfolios: response.data
                }
            })
        }
    }).catch(function (error) { 
        console.log(error);
    });
}
function get_portfolio_by_id(id){
    axios.get(`${root_url}/api/seda/portfolio/${id}`).then(function (response) {
         
        if (response.data) {
            new Vue({
                el: '#portfolioModal',
                data: {
                    url : root_url,
                    portfolio: response.data
                }
            });
            $('#portfolioModal').modal();
        }
    }).catch(function (error) { 
        console.log(error);
    });
}